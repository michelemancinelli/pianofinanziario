<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Finanziario 2025 - v32</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .budget-input {
            width: 100%;
            min-width: 80px;
            padding: 4px 8px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            text-align: right;
            transition: all 0.2s;
            font-variant-numeric: tabular-nums;
        }
        .budget-input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        .budget-input::placeholder { color: #94a3b8; opacity: 0.7; font-style: italic; }

        .month-tab { cursor: pointer; padding: 8px 16px; border-bottom: 2px solid transparent; color: #64748b; font-weight: 500; transition: all 0.2s; white-space: nowrap; }
        .month-tab:hover { color: #4f46e5; background-color: #f8fafc; }
        .month-tab.active { border-bottom-color: #4f46e5; color: #4f46e5; background-color: #eef2ff; }

        .clickable-cell { cursor: pointer; transition: background-color 0.2s; text-decoration: underline; text-decoration-color: #e2e8f0; text-underline-offset: 4px; }
        .clickable-cell:hover { background-color: #eff6ff; text-decoration-color: #3b82f6; color: #1d4ed8; }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }

        .modal { transition: opacity 0.25s ease; }
        body.modal-active { overflow-y: hidden; }
        .hidden { display: none; }
        
        .matrix-cell { padding: 8px; text-align: right; white-space: nowrap; font-size: 0.8rem; border-right: 1px solid #f1f5f9; }
        .matrix-header { padding: 8px; text-align: center; font-weight: 600; font-size: 0.75rem; background: #f8fafc; border-bottom: 2px solid #e2e8f0; }
        .matrix-row:hover { background-color: #f8fafc; }
        
        .empty-state { text-align: center; padding: 2rem; color: #94a3b8; font-style: italic; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased selection:bg-indigo-100 selection:text-indigo-800">

    <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-40 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                
                <!-- Left: Branding & Year Selector -->
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-3">
                        <!-- LOGO ICONA -->
                        <div class="bg-indigo-600 text-white w-10 h-10 flex items-center justify-center rounded-lg shadow-md">
                            <i class="fas fa-chart-pie text-xl"></i>
                        </div>
                        <div class="hidden md:flex flex-col justify-center">
                            <!-- TITOLO PULITO -->
                            <h1 class="text-xl font-bold text-slate-900 leading-none">
                                Piano Finanziario
                            </h1>
                        </div>
                    </div>

                    <div class="h-8 w-px bg-slate-200 mx-1"></div>

                    <!-- Year Selector -->
                    <div class="flex items-center bg-slate-100 rounded-lg border border-slate-200 px-2 hover:border-indigo-300 transition-colors">
                        <i class="fas fa-calendar-alt text-slate-500 text-xs mr-2"></i>
                        <select id="yearSelector" onchange="changeYear(this.value)" class="bg-transparent border-none text-sm font-bold text-slate-700 focus:ring-0 cursor-pointer py-2 pr-4 outline-none">
                            <!-- Populated via JS -->
                        </select>
                    </div>
                </div>
                
                <!-- Right: Actions -->
                <div class="flex items-center gap-2 md:gap-3">
                    <button onclick="openReportModal()" class="flex items-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-700 px-3 py-2 rounded-lg text-sm font-bold transition-all mr-2 border border-slate-300 shadow-sm hover:shadow-md">
                        <i class="fas fa-chart-pie text-slate-500"></i>
                        <span class="hidden sm:inline">Report</span>
                    </button>

                    <button onclick="openTransactionModal('expense')" class="flex items-center gap-2 bg-rose-600 hover:bg-rose-700 text-white px-3 py-2 rounded-lg text-sm font-bold shadow-md transition-transform transform hover:scale-105 active:scale-95">
                        <i class="fas fa-minus-circle"></i>
                        <span class="hidden sm:inline">Spesa</span>
                    </button>

                    <button onclick="openTransactionModal('income')" class="flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-2 rounded-lg text-sm font-bold shadow-md transition-transform transform hover:scale-105 active:scale-95">
                        <i class="fas fa-plus-circle"></i>
                        <span class="hidden sm:inline">Entrata</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10">

        <!-- DASHBOARD KPI -->
        <section class="animate-fade-in-up">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-slate-500 uppercase">Totale Entrate <span id="kpi-year-label-1" class="text-xs normal-case opacity-50"></span></p>
                        <p class="text-2xl font-bold text-emerald-600 mt-1" id="kpi-income">€0</p>
                    </div>
                    <div class="p-3 bg-emerald-50 rounded-full text-emerald-600"><i class="fas fa-arrow-up"></i></div>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-slate-500 uppercase">Totale Uscite <span id="kpi-year-label-2" class="text-xs normal-case opacity-50"></span></p>
                        <p class="text-2xl font-bold text-rose-600 mt-1" id="kpi-expense">€0</p>
                    </div>
                    <div class="p-3 bg-rose-50 rounded-full text-rose-600"><i class="fas fa-arrow-down"></i></div>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between" id="kpi-delta-card">
                    <div>
                        <p class="text-sm font-medium text-slate-500 uppercase">Rimanenza Netta</p>
                        <p class="text-2xl font-bold mt-1" id="kpi-balance">€0</p>
                    </div>
                    <div class="p-3 bg-white border border-slate-200 rounded-full" id="kpi-icon"><i class="fas fa-wallet"></i></div>
                </div>
            </div>
        </section>

        <!-- MAIN EDITOR TABLE -->
        <section id="editor-section" class="bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-100 bg-slate-50">
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
                    <div>
                        <h2 class="text-xl font-bold text-slate-900 flex items-center gap-2">
                            Registro Finanziario <span id="year-display" class="bg-indigo-100 text-indigo-700 text-sm px-2 py-0.5 rounded-full">...</span>
                        </h2>
                        <p class="text-sm text-slate-500 mt-1">Gestisci le previsioni e monitora il reale.</p>
                    </div>
                    <div class="flex flex-wrap gap-3 items-center w-full lg:w-auto">
                        <!-- MANAGE ITEMS BUTTON -->
                        <button onclick="openManageItemsModal()" class="flex-1 lg:flex-none text-slate-700 bg-white border border-slate-300 hover:bg-slate-50 focus:ring-4 focus:ring-indigo-100 font-medium rounded-lg text-sm px-4 py-2.5 inline-flex items-center justify-center transition-all shadow-sm">
                            <i class="fas fa-cog mr-2 text-slate-500"></i> Gestisci Voci
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex overflow-x-auto custom-scrollbar border-b border-slate-200 bg-white" id="monthTabsContainer"></div>

            <!-- Table -->
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left text-slate-600">
                    <thead class="text-xs text-slate-500 uppercase bg-slate-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-1/3">Voce</th>
                            <th scope="col" class="px-6 py-3 text-right w-1/4">
                                <span class="bg-slate-200 text-slate-700 px-2 py-1 rounded">Budget</span>
                            </th>
                            <th scope="col" class="px-6 py-3 text-right w-1/4">
                                <span class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded">Reale (Click)</span>
                            </th>
                            <th scope="col" class="px-6 py-3 text-right w-1/6">Diff.</th>
                        </tr>
                    </thead>
                    
                    <!-- EXPENSES -->
                    <tbody id="expenseTableBody" class="divide-y divide-slate-100 bg-white"></tbody>
                    
                    <!-- SEPARATOR -->
                    <tbody class="bg-slate-100 border-t-2 border-slate-200">
                        <tr>
                            <td colspan="4" class="px-6 py-3 text-xs font-bold text-emerald-700 uppercase tracking-wider flex items-center gap-2">
                                <i class="fas fa-arrow-up"></i> Sezione Entrate
                            </td>
                        </tr>
                    </tbody>

                    <!-- INCOME -->
                    <tbody id="incomeTableBody" class="divide-y divide-slate-100 bg-white"></tbody>

                    <!-- FOOTER -->
                    <tfoot class="bg-slate-50 font-bold text-slate-800 border-t-2 border-slate-200">
                        <tr>
                            <td class="px-6 py-3 text-rose-700">TOTALE USCITE</td>
                            <td class="px-6 py-3 text-right text-rose-700" id="footer-exp-budget">€0</td>
                            <td class="px-6 py-3 text-right text-rose-700" id="footer-exp-actual">€0</td>
                            <td class="px-6 py-3 text-right text-slate-400">-</td>
                        </tr>
                        <tr class="bg-white">
                            <td class="px-6 py-3 text-emerald-700">TOTALE ENTRATE</td>
                            <td class="px-6 py-3 text-right text-emerald-700" id="footer-inc-budget">€0</td>
                            <td class="px-6 py-3 text-right text-emerald-700" id="footer-inc-actual">€0</td>
                            <td class="px-6 py-3 text-right text-slate-400">-</td>
                        </tr>
                        <tr class="bg-slate-800 text-white text-base">
                            <td class="px-6 py-4">RIMANENZA (Netto)</td>
                            <td class="px-6 py-4 text-right opacity-70" id="footer-net-budget">€0</td>
                            <td class="px-6 py-4 text-right" id="footer-net-actual">€0</td>
                            <td class="px-6 py-4 text-right" id="footer-net-diff">€0</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center text-slate-400 text-sm">
            <p>Piano Finanziario 2025 - v31 Michele Mancinelli</p>
            <button onclick="askReset()" class="text-rose-300 hover:text-rose-500 mt-2 md:mt-0 text-xs cursor-pointer px-2 py-1 border border-rose-200 rounded">Reset Dati</button>
        </div>
    </footer>

    <!-- MODALS SECTION -->
    
    <!-- Item Manager Modal -->
    <div id="manageItemsModal" class="modal opacity-0 pointer-events-none fixed inset-0 z-[70] flex items-center justify-center p-4">
        <div class="modal-overlay absolute inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeModal('manageItemsModal')"></div>
        <div class="modal-container bg-white w-full max-w-2xl mx-auto rounded-2xl shadow-2xl z-[70] overflow-hidden transform scale-95 transition-all duration-300 flex flex-col max-h-[90vh]">
            <div class="bg-indigo-600 p-4 flex justify-between items-center text-white shrink-0">
                <h3 class="font-bold text-lg"><i class="fas fa-tasks mr-2"></i>Gestisci Voci</h3>
                <button onclick="closeModal('manageItemsModal')" class="hover:text-white/80"><i class="fas fa-times"></i></button>
            </div>
            <div class="flex bg-indigo-50 border-b border-indigo-100 shrink-0">
                <button onclick="switchManageType('expense')" id="tabManageExpense" class="flex-1 py-3 text-sm font-bold text-center text-indigo-700 border-b-2 border-indigo-600 bg-white">Uscite</button>
                <button onclick="switchManageType('income')" id="tabManageIncome" class="flex-1 py-3 text-sm font-bold text-center text-slate-500 hover:text-indigo-600 transition-colors">Entrate</button>
            </div>
            <div class="p-4 bg-slate-50 border-b border-slate-200 shrink-0">
                <div class="flex flex-col md:flex-row gap-3">
                    <input type="hidden" id="manageEditIndex" value="-1">
                    <div class="flex-1"><label class="block text-xs font-bold text-slate-400 uppercase mb-1">Categoria</label><input type="text" id="manageCategory" placeholder="Es. Casa" class="w-full border-slate-200 rounded-lg p-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                    <div class="flex-1"><label class="block text-xs font-bold text-slate-400 uppercase mb-1">Voce</label><input type="text" id="manageName" placeholder="Es. Affitto" class="w-full border-slate-200 rounded-lg p-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                    <div class="flex items-end"><button onclick="saveManagedItem()" id="btnManageSave" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg text-sm shadow transition-colors w-full md:w-auto">Aggiungi</button></div>
                </div>
            </div>
            <div class="flex-grow overflow-y-auto p-0">
                <table class="w-full text-sm text-left text-slate-600"><thead class="bg-slate-100 text-xs text-slate-500 uppercase sticky top-0"><tr><th class="px-6 py-3 w-1/3">Categoria</th><th class="px-6 py-3 w-1/3">Voce</th><th class="px-6 py-3 text-center">Azioni</th></tr></thead><tbody id="manageListBody" class="divide-y divide-slate-100"></tbody></table>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal opacity-0 pointer-events-none fixed inset-0 z-[80] flex items-center justify-center p-4">
        <div class="modal-overlay absolute inset-0 bg-slate-900/40 backdrop-blur-sm"></div>
        <div class="modal-container bg-white w-full max-w-sm mx-auto rounded-xl shadow-2xl z-[80] overflow-hidden transform scale-95 transition-all duration-300">
            <div class="p-6 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-rose-100 mb-4"><i class="fas fa-trash-alt text-rose-600 text-xl"></i></div>
                <h3 class="text-lg font-bold text-slate-900 mb-2">Eliminare la voce?</h3>
                <p class="text-sm text-slate-500 mb-6">Questa azione rimuoverà la voce e tutti i dati associati in questo anno. Non si può annullare.</p>
                <div class="flex justify-center gap-3">
                    <button onclick="closeConfirmModal()" class="px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-colors">Annulla</button>
                    <button id="btnConfirmAction" class="px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg text-sm font-bold shadow transition-colors">Elimina</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Alert Modal -->
    <div id="alertModal" class="modal opacity-0 pointer-events-none fixed inset-0 z-[90] flex items-center justify-center p-4">
        <div class="modal-overlay absolute inset-0 bg-slate-900/40"></div>
        <div class="modal-container bg-white w-full max-w-sm mx-auto rounded-xl shadow-2xl z-[90] overflow-hidden transform scale-95 transition-all duration-300">
            <div class="p-6 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 mb-4"><i class="fas fa-info-circle text-indigo-600 text-xl"></i></div>
                <h3 class="text-lg font-bold text-slate-900 mb-2">Avviso</h3>
                <p id="alertMessage" class="text-sm text-slate-500 mb-6">Messaggio</p>
                <button onclick="closeAlertModal()" class="w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow transition-colors">OK</button>
            </div>
        </div>
    </div>


    <!-- Report Modal -->
    <div id="reportModal" class="modal opacity-0 pointer-events-none fixed inset-0 z-[70] flex items-center justify-center p-0 sm:p-4"><div class="modal-overlay absolute inset-0 bg-slate-900/80 backdrop-blur-sm" onclick="closeModal('reportModal')"></div><div class="modal-container bg-white w-full h-full sm:h-auto sm:max-h-[95vh] sm:max-w-6xl mx-auto rounded-none sm:rounded-2xl shadow-2xl z-[70] overflow-hidden flex flex-col"><div class="bg-slate-800 p-4 flex justify-between items-center text-white shrink-0"><div><h3 class="font-bold text-xl"><i class="fas fa-chart-pie mr-2"></i>Analisi</h3><p class="text-xs text-slate-400" id="reportYearLabel">Anno</p></div><button onclick="closeModal('reportModal')" class="hover:text-white/80 p-2"><i class="fas fa-times fa-lg"></i></button></div><div class="flex-grow overflow-y-auto p-4 sm:p-8 bg-slate-50 space-y-8"><div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6"><h4 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">1. Riepilogo per Categoria</h4><div class="overflow-x-auto"><table class="w-full text-sm text-left"><thead class="bg-slate-50 text-xs uppercase text-slate-500"><tr><th class="px-6 py-3">Categoria</th><th class="px-6 py-3 text-right">Mese Corrente</th><th class="px-6 py-3 text-right">Totale Anno</th><th class="px-6 py-3 text-right">Media Mensile</th></tr></thead><tbody id="reportCategoryBody" class="divide-y divide-slate-100"></tbody></table></div></div><div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6"><h4 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">2. Matrice Annuale Completa</h4><div class="overflow-x-auto custom-scrollbar border border-slate-200 rounded-lg max-h-[500px]"><table class="w-full text-sm border-collapse"><thead class="bg-slate-100 sticky top-0 z-10 text-slate-700"><tr><th class="matrix-header text-left min-w-[150px] sticky left-0 z-20 bg-slate-100 border-r">Voce</th><th class="matrix-header">Gen</th><th class="matrix-header">Feb</th><th class="matrix-header">Mar</th><th class="matrix-header">Apr</th><th class="matrix-header">Mag</th><th class="matrix-header">Giu</th><th class="matrix-header">Lug</th><th class="matrix-header">Ago</th><th class="matrix-header">Set</th><th class="matrix-header">Ott</th><th class="matrix-header">Nov</th><th class="matrix-header">Dic</th><th class="matrix-header bg-indigo-50 text-indigo-800">TOT</th></tr></thead><tbody id="reportMatrixBody" class="bg-white"></tbody></table></div></div></div></div></div>

    <!-- Transaction Modal -->
    <div id="transactionModal" class="modal opacity-0 pointer-events-none fixed inset-0 z-[60] flex items-center justify-center p-4"><div class="modal-overlay absolute inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeModal('transactionModal')"></div><div class="modal-container bg-white w-full max-w-md mx-auto rounded-2xl shadow-2xl z-[60] overflow-hidden transform scale-95 transition-all duration-300"><div id="transModalHeader" class="p-4 flex justify-between items-center text-white transition-colors"><h3 class="font-bold text-lg" id="transModalTitle">Registra</h3><button onclick="closeModal('transactionModal')" class="hover:text-white/80"><i class="fas fa-times"></i></button></div><div class="p-6 space-y-4"><input type="hidden" id="transId"><input type="hidden" id="transType"><div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Data Operazione</label><input type="date" id="transDate" class="w-full border-slate-200 rounded-lg p-3 bg-slate-50 focus:ring-2 outline-none font-medium text-slate-700"></div><div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Categoria</label><select id="transCategory" onchange="updateItemSelect()" class="w-full border-slate-200 rounded-lg p-3 bg-slate-50 focus:ring-2 outline-none"></select></div><div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Voce</label><select id="transItem" class="w-full border-slate-200 rounded-lg p-3 bg-slate-50 focus:ring-2 outline-none"></select></div><div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Importo (€)</label><input type="number" id="transAmount" step="0.01" class="w-full border-slate-200 rounded-lg p-3 bg-slate-50 focus:ring-2 outline-none font-bold text-lg"></div><div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Note</label><input type="text" id="transNote" class="w-full border-slate-200 rounded-lg p-3 bg-slate-50 focus:ring-2 outline-none"></div><button onclick="saveTransaction()" id="transSaveBtn" class="w-full text-white font-bold py-3 rounded-lg shadow-lg hover:shadow-xl transition-all transform active:scale-95">Salva</button></div></div></div>

    <!-- Detail List Modal -->
    <div id="detailModal" class="modal opacity-0 pointer-events-none fixed inset-0 z-50 flex items-center justify-center p-4"><div class="modal-overlay absolute inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeModal('detailModal')"></div><div class="modal-container bg-white w-full max-w-lg mx-auto rounded-2xl shadow-2xl z-50 overflow-hidden transform scale-95 transition-all duration-300 flex flex-col max-h-[90vh]"><div id="detailHeader" class="p-4 flex justify-between items-center text-white shrink-0"><div><h3 class="font-bold text-lg" id="detailModalTitle">Dettaglio</h3><p class="text-xs opacity-80" id="detailModalSubtitle">Analisi</p></div><button onclick="closeModal('detailModal')" class="hover:text-white/80"><i class="fas fa-times"></i></button></div><div class="p-0 overflow-y-auto flex-grow"><table class="w-full text-sm text-left text-slate-600"><tbody id="detailModalBody" class="divide-y divide-slate-100"></tbody></table></div><div class="p-4 bg-slate-50 border-t border-slate-200 shrink-0"><button id="btnQuickAdd" class="w-full font-bold py-3 rounded-lg shadow text-white transition-all flex items-center justify-center gap-2"><i class="fas fa-plus-circle"></i> Aggiungi qui</button></div></div></div>

    <!-- LOGIC -->
    <script>
        const _0x4b960b=_0x2180;(function(_0x5de120,_0x470027){const _0x589887=_0x2180,_0x5077f4=_0x5de120();while(!![]){try{const _0x181db1=-parseInt(_0x589887(0x259))/0x1+-parseInt(_0x589887(0x266))/0x2+parseInt(_0x589887(0x1fc))/0x3+parseInt(_0x589887(0x262))/0x4*(-parseInt(_0x589887(0x251))/0x5)+parseInt(_0x589887(0x27b))/0x6*(-parseInt(_0x589887(0x284))/0x7)+-parseInt(_0x589887(0x242))/0x8*(parseInt(_0x589887(0x237))/0x9)+-parseInt(_0x589887(0x254))/0xa*(-parseInt(_0x589887(0x22a))/0xb);if(_0x181db1===_0x470027)break;else _0x5077f4['push'](_0x5077f4['shift']());}catch(_0x362c9e){_0x5077f4['push'](_0x5077f4['shift']());}}}(_0x12e0,0x7a7b9));const months=[_0x4b960b(0x1c7),_0x4b960b(0x1f2),_0x4b960b(0x24b),_0x4b960b(0x217),_0x4b960b(0x1cb),_0x4b960b(0x21f),_0x4b960b(0x278),'Agosto',_0x4b960b(0x27d),'Ottobre',_0x4b960b(0x238),_0x4b960b(0x21d)],shortMonths=['Gen','Feb',_0x4b960b(0x261),'Apr','Mag','Giu',_0x4b960b(0x204),_0x4b960b(0x211),_0x4b960b(0x1e7),_0x4b960b(0x22f),_0x4b960b(0x260),_0x4b960b(0x1d0)];let currentYear=0x7e9,currentMonthView=new Date()[_0x4b960b(0x1ff)](),expenseData=[],incomeData=[],transactions=[];function initApp(){const _0x5712ca=_0x4b960b,_0x5144fb=document[_0x5712ca(0x1d9)](_0x5712ca(0x1eb));let _0x55b7d8='';for(let _0x2b8c72=0x7e9;_0x2b8c72<=0x7f8;_0x2b8c72++){_0x55b7d8+=_0x5712ca(0x275)+_0x2b8c72+'\x22>'+_0x2b8c72+_0x5712ca(0x206);}_0x5144fb['innerHTML']=_0x55b7d8;const _0x592934=localStorage['getItem'](_0x5712ca(0x239));currentYear=_0x592934?parseInt(_0x592934):0x7e9,_0x5144fb['value']=currentYear,loadYearData(currentYear),renderTabs(),updateUI();}function showCustomAlert(_0x57c81b){const _0x2cfe60=_0x4b960b;document['getElementById'](_0x2cfe60(0x222))[_0x2cfe60(0x1f1)]=_0x57c81b,toggleModal(_0x2cfe60(0x269),!![]);}function closeAlertModal(){const _0x4f135a=_0x4b960b;toggleModal(_0x4f135a(0x269),![]);}function showCustomConfirm(_0x282e0c){const _0x3d139e=_0x4b960b,_0x150afa=document[_0x3d139e(0x1d9)](_0x3d139e(0x20c)),_0x2d812c=_0x150afa[_0x3d139e(0x1f0)](!![]);_0x150afa[_0x3d139e(0x25a)]['replaceChild'](_0x2d812c,_0x150afa),_0x2d812c[_0x3d139e(0x1f4)](_0x3d139e(0x1f9),()=>{_0x282e0c(),closeConfirmModal();}),toggleModal(_0x3d139e(0x227),!![]);}function closeConfirmModal(){toggleModal('confirmModal',![]);}function askReset(){showCustomConfirm(()=>{const _0x3f0d21=_0x2180;localStorage[_0x3f0d21(0x1c4)](),window[_0x3f0d21(0x1cc)][_0x3f0d21(0x24f)]=window[_0x3f0d21(0x1cc)][_0x3f0d21(0x24f)];});}let currentManageType=_0x4b960b(0x267),manageEditIndex=-0x1;function openManageItemsModal(){switchManageType('expense'),toggleModal('manageItemsModal',!![]);}function switchManageType(_0x37f9a8){const _0x57ad6d=_0x4b960b;currentManageType=_0x37f9a8;const _0x4999a0=document['getElementById']('tabManageExpense'),_0x203324=document[_0x57ad6d(0x1d9)](_0x57ad6d(0x1ee));_0x37f9a8===_0x57ad6d(0x267)?(_0x4999a0[_0x57ad6d(0x23d)]=_0x57ad6d(0x1fa),_0x203324[_0x57ad6d(0x23d)]=_0x57ad6d(0x256)):(_0x4999a0[_0x57ad6d(0x23d)]=_0x57ad6d(0x256),_0x203324['className']=_0x57ad6d(0x1fa)),resetManageForm(),renderManageList();}function resetManageForm(){const _0x4c7d1c=_0x4b960b;manageEditIndex=-0x1,document[_0x4c7d1c(0x1d9)]('manageEditIndex')[_0x4c7d1c(0x1fe)]=-0x1,document[_0x4c7d1c(0x1d9)](_0x4c7d1c(0x1c3))['value']='',document[_0x4c7d1c(0x1d9)](_0x4c7d1c(0x205))['value']='',document[_0x4c7d1c(0x1d9)]('btnManageSave')[_0x4c7d1c(0x1f1)]=_0x4c7d1c(0x25e),document[_0x4c7d1c(0x1d9)](_0x4c7d1c(0x253))[_0x4c7d1c(0x23d)]='bg-indigo-600\x20hover:bg-indigo-700\x20text-white\x20font-bold\x20py-2\x20px-4\x20rounded-lg\x20text-sm\x20shadow\x20transition-colors\x20w-full\x20md:w-auto';}function renderManageList(){const _0x4f6a46=_0x4b960b,_0x5a6d67=currentManageType==='expense'?expenseData:incomeData,_0x52e66f=document[_0x4f6a46(0x1d9)]('manageListBody');_0x52e66f['innerHTML']='';if(_0x5a6d67[_0x4f6a46(0x27c)]===0x0){_0x52e66f[_0x4f6a46(0x1ca)]='<tr><td\x20colspan=\x223\x22\x20class=\x22text-center\x20p-8\x20text-slate-400\x20italic\x22>Nessuna\x20voce\x20presente.</td></tr>';return;}const _0x15d7b7=_0x5a6d67[_0x4f6a46(0x234)]((_0x2427fb,_0x21f566)=>({..._0x2427fb,'originalIdx':_0x21f566}))[_0x4f6a46(0x1e1)]((_0xb91bd0,_0x4dd19e)=>_0xb91bd0[_0x4f6a46(0x1e9)][_0x4f6a46(0x1d7)](_0x4dd19e['group'])||_0xb91bd0['name']['localeCompare'](_0x4dd19e[_0x4f6a46(0x223)]));_0x15d7b7[_0x4f6a46(0x293)](_0x26814a=>{const _0x2d0b67=_0x4f6a46;_0x52e66f[_0x2d0b67(0x1ca)]+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-slate-50\x20border-b\x20border-slate-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-3\x20font-medium\x20text-indigo-600\x22>'+_0x26814a[_0x2d0b67(0x1e9)]+_0x2d0b67(0x283)+_0x26814a[_0x2d0b67(0x223)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-3\x20text-center\x20space-x-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editManagedItem('+_0x26814a['originalIdx']+_0x2d0b67(0x28e)+_0x26814a[_0x2d0b67(0x20d)]+_0x2d0b67(0x23c);});}function saveManagedItem(){const _0x4a7114=_0x4b960b,_0x3db649=document[_0x4a7114(0x1d9)](_0x4a7114(0x1c3))[_0x4a7114(0x1fe)][_0x4a7114(0x1f5)](),_0x47455e=document[_0x4a7114(0x1d9)](_0x4a7114(0x205))['value'][_0x4a7114(0x1f5)](),_0x2e3a0f=parseInt(document['getElementById'](_0x4a7114(0x28b))[_0x4a7114(0x1fe)]),_0x5c1ab6=currentManageType==='expense'?expenseData:incomeData;if(!_0x3db649||!_0x47455e){showCustomAlert(_0x4a7114(0x26e));return;}const _0x1920c4=_0x5c1ab6[_0x4a7114(0x1dd)]((_0x5aa991,_0x657146)=>_0x5aa991[_0x4a7114(0x1e9)][_0x4a7114(0x1f6)]()===_0x3db649[_0x4a7114(0x1f6)]()&&_0x5aa991[_0x4a7114(0x223)][_0x4a7114(0x1f6)]()===_0x47455e[_0x4a7114(0x1f6)]()&&_0x657146!==_0x2e3a0f);if(_0x1920c4){showCustomAlert('Voce\x20già\x20esistente.');return;}if(_0x2e3a0f>-0x1){const _0x9dd851=_0x5c1ab6[_0x2e3a0f][_0x4a7114(0x1e9)],_0x4293ad=_0x5c1ab6[_0x2e3a0f][_0x4a7114(0x223)];_0x5c1ab6[_0x2e3a0f][_0x4a7114(0x1e9)]=_0x3db649,_0x5c1ab6[_0x2e3a0f][_0x4a7114(0x223)]=_0x47455e,transactions['forEach'](_0x2effdc=>{const _0x462f87=_0x4a7114;_0x2effdc['type']===currentManageType&&_0x2effdc[_0x462f87(0x1e9)]===_0x9dd851&&_0x2effdc[_0x462f87(0x223)]===_0x4293ad&&(_0x2effdc[_0x462f87(0x1e9)]=_0x3db649,_0x2effdc[_0x462f87(0x223)]=_0x47455e);});}else _0x5c1ab6[_0x4a7114(0x221)]({'group':_0x3db649,'name':_0x47455e,'budget':Array(0xc)[_0x4a7114(0x216)](0x0),'baseActual':Array(0xc)[_0x4a7114(0x216)](0x0)});saveData(),resetManageForm(),renderManageList(),updateUI();}function editManagedItem(_0x50b6c1){const _0x1b675f=_0x4b960b,_0x46b730=currentManageType===_0x1b675f(0x267)?expenseData:incomeData,_0x14a816=_0x46b730[_0x50b6c1];document[_0x1b675f(0x1d9)](_0x1b675f(0x1c3))[_0x1b675f(0x1fe)]=_0x14a816['group'],document[_0x1b675f(0x1d9)](_0x1b675f(0x205))['value']=_0x14a816[_0x1b675f(0x223)],document['getElementById']('manageEditIndex')['value']=_0x50b6c1,document[_0x1b675f(0x1d9)](_0x1b675f(0x253))['innerText']=_0x1b675f(0x1df),document[_0x1b675f(0x1d9)](_0x1b675f(0x253))['className']=_0x1b675f(0x26b),document['querySelector'](_0x1b675f(0x296))['scrollTop']=0x0;}function askDeleteManagedItem(_0x183588){showCustomConfirm(()=>{const _0x3d5f85=_0x2180,_0x103274=currentManageType===_0x3d5f85(0x267)?expenseData:incomeData;_0x103274[_0x3d5f85(0x282)](_0x183588,0x1),saveData(),renderManageList(),updateUI();});}function openReportModal(){const _0x51ff57=_0x4b960b;document[_0x51ff57(0x1d9)]('reportYearLabel')[_0x51ff57(0x1f1)]=_0x51ff57(0x23b)+currentYear,renderReportCategory(),renderReportMatrix(),toggleModal('reportModal',!![]);}function renderReportCategory(){const _0x299d67=_0x4b960b,_0x459dba=document['getElementById'](_0x299d67(0x1e6));_0x459dba[_0x299d67(0x1ca)]='';let _0x1471ea=[];expenseData&&expenseData[_0x299d67(0x27c)]>0x0&&(_0x1471ea=[...new Set(expenseData[_0x299d67(0x234)](_0x2fca67=>_0x2fca67['group']))]);if(_0x1471ea[_0x299d67(0x27c)]===0x0){_0x459dba[_0x299d67(0x1ca)]=_0x299d67(0x1fd);return;}_0x1471ea[_0x299d67(0x293)](_0x1eb34c=>{const _0x3bfde4=_0x299d67,_0x406ed8=currentMonthView===0xc?new Date()['getMonth']():currentMonthView;let _0x385249=0x0,_0x52858e=0x0;expenseData[_0x3bfde4(0x25f)](_0x5bec94=>_0x5bec94[_0x3bfde4(0x1e9)]===_0x1eb34c)[_0x3bfde4(0x293)](_0x22972f=>{const _0x2a69e3=_0x3bfde4;_0x385249+=getTotalActual(_0x2a69e3(0x267),_0x22972f[_0x2a69e3(0x1e9)],_0x22972f[_0x2a69e3(0x223)],_0x406ed8);for(let _0x30ac36=0x0;_0x30ac36<0xc;_0x30ac36++)_0x52858e+=getTotalActual(_0x2a69e3(0x267),_0x22972f[_0x2a69e3(0x1e9)],_0x22972f[_0x2a69e3(0x223)],_0x30ac36);}),_0x459dba['innerHTML']+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22hover:bg-slate-50\x20border-b\x20border-slate-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20font-medium\x20text-slate-700\x22>'+_0x1eb34c+_0x3bfde4(0x1e0)+formatMoney(_0x385249)+_0x3bfde4(0x24e)+formatMoney(_0x52858e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20text-right\x20text-slate-500\x20text-xs\x22>'+formatMoney(_0x52858e/0xc)+_0x3bfde4(0x280);});}function renderReportMatrix(){const _0x3099a1=_0x4b960b,_0x45016e=document[_0x3099a1(0x1d9)](_0x3099a1(0x1c5));_0x45016e[_0x3099a1(0x1ca)]='';if(!expenseData||expenseData['length']===0x0){_0x45016e['innerHTML']=_0x3099a1(0x27e);return;}const _0x201bfa=[...expenseData]['sort']((_0x497c92,_0x17c47a)=>_0x497c92[_0x3099a1(0x1e9)]['localeCompare'](_0x17c47a[_0x3099a1(0x1e9)]));_0x201bfa['forEach'](_0x103a55=>{const _0x116f83=_0x3099a1;let _0x9a77b7=_0x116f83(0x250)+_0x103a55[_0x116f83(0x223)]+'\x22>'+_0x103a55[_0x116f83(0x223)]+'</div><div\x20class=\x22text-[10px]\x20text-slate-400\x22>'+_0x103a55[_0x116f83(0x1e9)]+_0x116f83(0x268),_0x1d8cb8=0x0;for(let _0x378a5b=0x0;_0x378a5b<0xc;_0x378a5b++){const _0x4f7907=getTotalActual(_0x116f83(0x267),_0x103a55['group'],_0x103a55['name'],_0x378a5b);_0x1d8cb8+=_0x4f7907;const _0x5aad94=_0x4f7907>0x0?_0x116f83(0x249):_0x116f83(0x24c),_0x592802=_0x4f7907>_0x103a55[_0x116f83(0x241)][_0x378a5b]*1.2&&_0x103a55['budget'][_0x378a5b]>0x0?'bg-rose-50':'';_0x9a77b7+=_0x116f83(0x264)+_0x5aad94+'\x20'+_0x592802+'\x22>'+(_0x4f7907>0x0?Math[_0x116f83(0x213)](_0x4f7907):'-')+_0x116f83(0x295);}_0x9a77b7+=_0x116f83(0x201)+formatMoney(_0x1d8cb8)+_0x116f83(0x295),_0x45016e[_0x116f83(0x1ca)]+=_0x116f83(0x1d3)+_0x9a77b7+'</tr>';});}function loadYearData(_0x46e1b8){const _0x3e1eb3=_0x4b960b,_0x556f43=localStorage['getItem']('fm_year_'+_0x46e1b8);if(_0x556f43)try{const _0x4cb194=JSON['parse'](_0x556f43);expenseData=_0x4cb194[_0x3e1eb3(0x226)]||[],incomeData=_0x4cb194[_0x3e1eb3(0x1cd)]||[],transactions=_0x4cb194[_0x3e1eb3(0x225)]||[];}catch(_0x3507a9){expenseData=[],incomeData=[],transactions=[];}else{if(_0x46e1b8===0x7e9)expenseData=[],incomeData=[];else{const _0x199f44=localStorage['getItem'](_0x3e1eb3(0x1d2)+(_0x46e1b8-0x1));if(_0x199f44)try{const _0x57eb43=JSON['parse'](_0x199f44);expenseData=_0x57eb43[_0x3e1eb3(0x226)][_0x3e1eb3(0x234)](_0xadda1e=>({..._0xadda1e,'budget':Array(0xc)[_0x3e1eb3(0x216)](0x0),'baseActual':Array(0xc)['fill'](0x0)})),incomeData=_0x57eb43['incomeData']['map'](_0x1210c3=>({..._0x1210c3,'budget':Array(0xc)[_0x3e1eb3(0x216)](0x0),'baseActual':Array(0xc)[_0x3e1eb3(0x216)](0x0)}));}catch(_0x3f611f){expenseData=[],incomeData=[];}else expenseData=[],incomeData=[];}transactions=[],saveYearData(_0x46e1b8);}}function saveYearData(_0x1e69bd){const _0x34243d=_0x4b960b,_0x2ecaf2={'expenseData':expenseData,'incomeData':incomeData,'transactions':transactions};localStorage[_0x34243d(0x257)](_0x34243d(0x1d2)+_0x1e69bd,JSON[_0x34243d(0x25b)](_0x2ecaf2));}function changeYear(_0x5cf21d){const _0x58658b=_0x4b960b;saveYearData(currentYear),currentYear=parseInt(_0x5cf21d),localStorage[_0x58658b(0x257)](_0x58658b(0x239),currentYear),loadYearData(currentYear),updateUI();}function saveData(){saveYearData(currentYear),updateUI();}function _0x12e0(){const _0x3dfb8f=['sort','</div><div\x20class=\x22text-xs\x20text-slate-400\x22>','kpi-year-label-2','<tr\x20class=\x22hover:bg-slate-50\x22><td\x20class=\x22px-6\x20py-3\x20text-slate-700\x22><span\x20class=\x22text-xs\x20font-bold\x20text-slate-400\x20mr-2\x22>','transType','reportCategoryBody','Set','transModalTitle','group','\x27,\x2012)\x22\x20class=\x22clickable-cell\x20font-bold\x20','yearSelector','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>Nessuna\x20voce\x20di\x20entrata.</td></tr>','<i\x20class=\x22fas\x20fa-minus-circle\x20mr-2\x22></i>Nuova\x20Spesa','tabManageIncome','split','cloneNode','innerText','Febbraio','transNote','addEventListener','trim','toLowerCase','incomeTableBody','abs','click','flex-1\x20py-3\x20text-sm\x20font-bold\x20text-center\x20text-indigo-700\x20border-b-2\x20border-indigo-600\x20bg-white','detailModal','2129760OyttVe','<tr><td\x20colspan=\x224\x22\x20class=\x22p-4\x20text-center\x20text-slate-400\x22>Nessun\x20dato\x20da\x20mostrare.</td></tr>','value','getMonth','findIndex','<td\x20class=\x22matrix-cell\x20font-bold\x20text-indigo-700\x20bg-indigo-50\x20border-l\x22>',')\x22\x20class=\x22text-blue-500\x22><i\x20class=\x22fas\x20fa-pencil-alt\x22></i></button><button\x20onclick=\x22deleteTrans(','<div\x20onclick=\x22openDetailModal(\x27','Lug','manageName','</option>','</span>','contains','DOMContentLoaded','amount','transCategory','btnConfirmAction','originalIdx','\x20px-2\x20py-1\x20rounded\x22>','active','bg-emerald-600\x20hover:bg-emerald-700','Ago','\x27,\x20','round','type','btnQuickAdd','fill','Aprile','transSaveBtn','currency','kpi-expense','footer-net-actual','<div\x20onclick=\x22switchMonth(12)\x22\x20class=\x22month-tab\x20','Dicembre','detailHeader','Giugno','<input\x20type=\x22number\x22\x20step=\x220.01\x22\x20value=\x22','push','alertMessage','name','kpi-income','transactions','expenseData','confirmModal',')\x22\x20class=\x22month-tab\x20','\x22>TOTALE\x20ANNO</div>','4961UugiFK','p-3\x20bg-emerald-50\x20rounded-full\x20text-emerald-600','<span\x20class=\x22font-bold\x20text-slate-700\x22>','transactionModal','format','Ott','detailModalSubtitle','</div>','join','footer-net-diff','map','text-rose-700','income','234bPuRXA','Novembre','fm_current_year','note','Anno\x20',')\x22\x20class=\x22text-rose-500\x20hover:text-rose-700\x20p-1\x22\x20title=\x22Elimina\x22><i\x20class=\x22fas\x20fa-trash-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','className','Riepilogo\x20Annuale','bg-emerald-600','transAmount','budget','259544KTSOTx','detailModalBody','NumberFormat','text-rose-600','</td><td\x20class=\x22px-6\x20py-4\x20text-right\x22>','expenseTableBody','Inserisci\x20importo','text-slate-700\x20font-medium','text-emerald-600','Marzo','text-slate-300','footer-inc-actual','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20text-right\x20font-bold\x20text-indigo-600\x22>','href','<td\x20class=\x22matrix-cell\x20text-left\x20font-medium\x20text-slate-700\x20sticky\x20left-0\x20bg-white\x20border-r\x20z-20\x22><div\x20class=\x22truncate\x20max-w-[140px]\x22\x20title=\x22','78170PBrodw','add','btnManageSave','39610YbHZhO','w-full\x20text-white\x20font-bold\x20py-3\x20rounded-lg\x20shadow-lg\x20hover:shadow-xl\x20transition-all\x20transform\x20active:scale-95\x20','flex-1\x20py-3\x20text-sm\x20font-bold\x20text-center\x20text-slate-500\x20hover:text-indigo-600\x20transition-colors','setItem','it-IT','188635xUEwjw','parentNode','stringify','footer-exp-actual','p-4\x20flex\x20justify-between\x20items-center\x20text-white\x20shrink-0\x20','Aggiungi','filter','Nov','Mar','8oPlQal','<div\x20onclick=\x22switchMonth(','<td\x20class=\x22matrix-cell\x20','p-3\x20bg-rose-50\x20rounded-full\x20text-rose-600','1487722QKDxRx','expense','</div></td>','alertModal','\x22\x20onfocus=\x22if(this.value===\x27\x27){this.placeholder=this.getAttribute(\x27data-suggest\x27)}\x22\x20onblur=\x22this.placeholder=\x27\x27\x22\x20onchange=\x22updateBudget(\x27','bg-emerald-600\x20hover:bg-emerald-700\x20text-white\x20font-bold\x20py-2\x20px-4\x20rounded-lg\x20text-sm\x20shadow\x20transition-colors\x20w-full\x20md:w-auto','kpi-balance','</td><td\x20class=\x22px-6\x20py-4\x20text-right\x20font-bold\x20','Compila\x20tutti\x20i\x20campi','remove','date','</div></td><td\x20class=\x22px-6\x20py-4\x20text-right\x22>','transModalHeader','\x27,\x20\x27','scale-100','<option\x20value=\x22','opacity-0','footer-inc-budget','Luglio',',\x20this.value)\x22\x20class=\x22budget-input\x20bg-white\x20focus:bg-indigo-50\x22>','transItem','224832kfqAVs','length','Settembre','<tr><td\x20colspan=\x2214\x22\x20class=\x22p-4\x20text-center\x20text-slate-400\x22>Nessuna\x20voce\x20presente.</td></tr>','html','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','</td><td\x20class=\x22px-6\x20py-3\x20text-center\x20space-x-2\x22><button\x20onclick=\x22editTrans(','splice','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-3\x20font-medium\x20text-slate-700\x22>','35rXTwZm','text-slate-400','text-rose-400','onclick','body',')\x22\x20class=\x22clickable-cell\x20font-bold\x20','.modal-container','manageEditIndex','text-2xl\x20font-bold\x20mt-1\x20text-emerald-600','footer-net-budget',')\x22\x20class=\x22text-blue-500\x20hover:text-blue-700\x20p-1\x22\x20title=\x22Modifica\x22><i\x20class=\x22fas\x20fa-pencil-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22askDeleteManagedItem(','scale-95','modal-active','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>Nessuna\x20voce\x20di\x20spesa.\x20Clicca\x20\x22Gestisci\x20Voci\x22.</td></tr>','bg-white\x20p-5\x20rounded-xl\x20shadow-sm\x20border\x20border-l-4\x20border-rose-500\x20flex\x20items-center\x20justify-between','forEach','transDate','</td>','#manageItemsModal\x20.modal-container','manageCategory','clear','reportMatrixBody','now','Gennaio','px-6\x20py-4\x20text-right\x20font-bold\x20text-lg\x20','detailModalTitle','innerHTML','Maggio','location','incomeData','bg-rose-600\x20hover:bg-rose-700','bg-rose-600','Dic','baseActual','fm_year_','<tr\x20class=\x22matrix-row\x22>','classList','bg-white\x20p-5\x20rounded-xl\x20shadow-sm\x20border\x20border-l-4\x20border-emerald-500\x20flex\x20items-center\x20justify-between','toISOString','localeCompare','transId','getElementById','\x20<i\x20class=\x22fas\x20fa-search\x20text-xs\x20ml-1\x20opacity-50\x22></i></div>','p-4\x20flex\x20justify-between\x20items-center\x20text-white\x20','padStart','find','pointer-events-none','Salva\x20Modifica','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22px-6\x20py-4\x20text-right\x20font-bold\x20text-slate-800\x22>'];_0x12e0=function(){return _0x3dfb8f;};return _0x12e0();}function updateUI(){const _0x1c7d1f=_0x4b960b;document[_0x1c7d1f(0x1d9)]('year-display')['innerText']=currentYear,document[_0x1c7d1f(0x1d9)]('kpi-year-label-1')[_0x1c7d1f(0x1f1)]='('+currentYear+')',document[_0x1c7d1f(0x1d9)](_0x1c7d1f(0x1e3))[_0x1c7d1f(0x1f1)]='('+currentYear+')',calculateKPIs(),renderTable();}const formatMoney=_0x464377=>new Intl[(_0x4b960b(0x244))](_0x4b960b(0x258),{'style':_0x4b960b(0x219),'currency':'EUR'})[_0x4b960b(0x22e)](_0x464377),sumArr=_0xda68b1=>_0xda68b1['reduce']((_0x7289a7,_0x2680a4)=>_0x7289a7+(Number(_0x2680a4)||0x0),0x0);function getTotalActual(_0x29efa9,_0x51c25e,_0x372c88,_0x3e7913){const _0x2c0816=_0x4b960b,_0xe9253f=_0x29efa9==='expense'?expenseData:incomeData,_0xc1381e=_0xe9253f[_0x2c0816(0x1dd)](_0x245e51=>_0x245e51[_0x2c0816(0x1e9)]===_0x51c25e&&_0x245e51[_0x2c0816(0x223)]===_0x372c88);if(!_0xc1381e)return 0x0;let _0x3b176f=_0xc1381e[_0x2c0816(0x1d1)][_0x3e7913]||0x0;const _0x3ba7ba=transactions[_0x2c0816(0x25f)](_0x3f1bb5=>{const _0xec94f=_0x2c0816,_0x381023=new Date(_0x3f1bb5[_0xec94f(0x270)]);return _0x3f1bb5['type']===_0x29efa9&&_0x3f1bb5[_0xec94f(0x1e9)]===_0x51c25e&&_0x3f1bb5['name']===_0x372c88&&_0x381023[_0xec94f(0x1ff)]()===_0x3e7913;});return _0x3ba7ba['forEach'](_0x1eaf90=>_0x3b176f+=_0x1eaf90['amount']),_0x3b176f;}function calculateKPIs(){const _0x5061cd=_0x4b960b;let _0xd76dbf=0x0,_0x3789f1=0x0;if(expenseData)expenseData[_0x5061cd(0x293)](_0x26d96b=>{const _0x2fa182=_0x5061cd;for(let _0x2d48f6=0x0;_0x2d48f6<0xc;_0x2d48f6++)_0xd76dbf+=getTotalActual(_0x2fa182(0x267),_0x26d96b[_0x2fa182(0x1e9)],_0x26d96b[_0x2fa182(0x223)],_0x2d48f6);});if(incomeData)incomeData[_0x5061cd(0x293)](_0x19fc7e=>{const _0x5248f5=_0x5061cd;for(let _0x2e5baa=0x0;_0x2e5baa<0xc;_0x2e5baa++)_0x3789f1+=getTotalActual('income',_0x19fc7e[_0x5248f5(0x1e9)],_0x19fc7e[_0x5248f5(0x223)],_0x2e5baa);});const _0x27cfb7=_0x3789f1-_0xd76dbf;document[_0x5061cd(0x1d9)](_0x5061cd(0x224))[_0x5061cd(0x1f1)]=formatMoney(_0x3789f1),document['getElementById'](_0x5061cd(0x21a))[_0x5061cd(0x1f1)]=formatMoney(_0xd76dbf),document[_0x5061cd(0x1d9)](_0x5061cd(0x26c))[_0x5061cd(0x1f1)]=formatMoney(_0x27cfb7);const _0x145fe1=document[_0x5061cd(0x1d9)]('kpi-delta-card'),_0x5e7a18=document[_0x5061cd(0x1d9)]('kpi-icon');_0x27cfb7>=0x0?(document['getElementById'](_0x5061cd(0x26c))[_0x5061cd(0x23d)]=_0x5061cd(0x28c),_0x145fe1[_0x5061cd(0x23d)]=_0x5061cd(0x1d5),_0x5e7a18[_0x5061cd(0x23d)]=_0x5061cd(0x22b)):(document[_0x5061cd(0x1d9)](_0x5061cd(0x26c))['className']='text-2xl\x20font-bold\x20mt-1\x20text-rose-600',_0x145fe1['className']=_0x5061cd(0x292),_0x5e7a18[_0x5061cd(0x23d)]=_0x5061cd(0x265));}function renderTabs(){const _0x11f077=_0x4b960b,_0x5e9d62=document[_0x11f077(0x1d9)]('monthTabsContainer');let _0x140a68='';shortMonths['forEach']((_0x296de3,_0x3e99c5)=>{const _0x59c7be=_0x11f077,_0x345cbf=_0x3e99c5===currentMonthView?_0x59c7be(0x20f):'';_0x140a68+=_0x59c7be(0x263)+_0x3e99c5+_0x59c7be(0x228)+_0x345cbf+'\x22>'+_0x296de3+_0x59c7be(0x231);});const _0x4f4bbb=currentMonthView===0xc?_0x11f077(0x20f):'';_0x140a68+=_0x11f077(0x21c)+_0x4f4bbb+_0x11f077(0x229),_0x5e9d62[_0x11f077(0x1ca)]=_0x140a68;}function switchMonth(_0x3702d9){currentMonthView=_0x3702d9,renderTabs(),renderTable();}function updateBudget(_0x8a8208,_0x22550c,_0x24ff11){const _0x3cd174=_0x4b960b,_0x3028b1=_0x8a8208===_0x3cd174(0x267)?expenseData:incomeData;_0x3028b1[_0x22550c][_0x3cd174(0x241)][currentMonthView]=parseFloat(_0x24ff11)||0x0,saveData();}function renderRow(_0x13b1ca,_0x419b94,_0x3b4dc0){const _0x1ec5ce=_0x4b960b;let _0x23f079=0x0,_0x1cf1de=0x0,_0x5d6d1d='',_0x50d033='';const _0x56b70d=currentMonthView===0xc;if(_0x56b70d){_0x23f079=sumArr(_0x13b1ca[_0x1ec5ce(0x241)]);for(let _0x24a05c=0x0;_0x24a05c<0xc;_0x24a05c++)_0x1cf1de+=getTotalActual(_0x3b4dc0,_0x13b1ca[_0x1ec5ce(0x1e9)],_0x13b1ca[_0x1ec5ce(0x223)],_0x24a05c);_0x5d6d1d=_0x1ec5ce(0x22c)+formatMoney(_0x23f079)+_0x1ec5ce(0x207),_0x50d033=_0x1ec5ce(0x203)+_0x3b4dc0+_0x1ec5ce(0x273)+_0x13b1ca[_0x1ec5ce(0x1e9)]+'\x27,\x20\x27'+_0x13b1ca[_0x1ec5ce(0x223)]+_0x1ec5ce(0x1ea)+(_0x3b4dc0===_0x1ec5ce(0x236)?'text-emerald-700':_0x1ec5ce(0x235))+_0x1ec5ce(0x20e)+formatMoney(_0x1cf1de)+_0x1ec5ce(0x1da);}else{_0x23f079=_0x13b1ca[_0x1ec5ce(0x241)][currentMonthView],_0x1cf1de=getTotalActual(_0x3b4dc0,_0x13b1ca[_0x1ec5ce(0x1e9)],_0x13b1ca[_0x1ec5ce(0x223)],currentMonthView);let _0x42869c='';if(currentMonthView>0x0){const _0x433f2e=_0x13b1ca['budget'][currentMonthView-0x1];if(_0x433f2e>0x0)_0x42869c=_0x433f2e;}const _0x58dc93=_0x23f079===0x0?'':_0x23f079;_0x5d6d1d=_0x1ec5ce(0x220)+_0x58dc93+'\x22\x20data-suggest=\x22'+_0x42869c+_0x1ec5ce(0x26a)+_0x3b4dc0+'\x27,\x20'+_0x419b94+_0x1ec5ce(0x279),_0x50d033=_0x1ec5ce(0x203)+_0x3b4dc0+'\x27,\x20\x27'+_0x13b1ca[_0x1ec5ce(0x1e9)]+_0x1ec5ce(0x273)+_0x13b1ca[_0x1ec5ce(0x223)]+_0x1ec5ce(0x212)+currentMonthView+_0x1ec5ce(0x289)+(_0x3b4dc0==='income'?'text-emerald-700':_0x1ec5ce(0x235))+'\x20px-2\x20py-1\x20rounded\x22>'+formatMoney(_0x1cf1de)+'\x20<i\x20class=\x22fas\x20fa-search\x20text-xs\x20ml-1\x20opacity-50\x22></i></div>';}const _0x9be062=_0x3b4dc0===_0x1ec5ce(0x267)?_0x23f079-_0x1cf1de:_0x1cf1de-_0x23f079;let _0x43024f=Math[_0x1ec5ce(0x1f8)](_0x9be062)<0.01?_0x1ec5ce(0x285):_0x9be062>=0x0?_0x1ec5ce(0x24a):_0x1ec5ce(0x245);return{'html':'<tr\x20class=\x22hover:bg-slate-50\x20border-b\x20border-slate-50\x22><td\x20class=\x22px-6\x20py-4\x20font-medium\x22><div\x20class=\x22text-slate-900\x22>'+_0x13b1ca[_0x1ec5ce(0x223)]+_0x1ec5ce(0x1e2)+_0x13b1ca[_0x1ec5ce(0x1e9)]+_0x1ec5ce(0x271)+_0x5d6d1d+_0x1ec5ce(0x246)+_0x50d033+_0x1ec5ce(0x26d)+_0x43024f+'\x22>'+formatMoney(_0x9be062)+'</td></tr>','b':_0x23f079,'a':_0x1cf1de};}function renderTable(){const _0xe8daeb=_0x4b960b,_0x1a3efa=document[_0xe8daeb(0x1d9)](_0xe8daeb(0x247));_0x1a3efa[_0xe8daeb(0x1ca)]='';let _0x165c35=0x0,_0x34b650=0x0;!expenseData||expenseData[_0xe8daeb(0x27c)]===0x0?_0x1a3efa[_0xe8daeb(0x1ca)]=_0xe8daeb(0x291):expenseData[_0xe8daeb(0x293)]((_0x5aab5a,_0x3becb2)=>{const _0x3819a7=_0xe8daeb,_0x2e3c9b=renderRow(_0x5aab5a,_0x3becb2,_0x3819a7(0x267));_0x1a3efa[_0x3819a7(0x1ca)]+=_0x2e3c9b[_0x3819a7(0x27f)],_0x165c35+=_0x2e3c9b['b'],_0x34b650+=_0x2e3c9b['a'];});const _0x1e736f=document[_0xe8daeb(0x1d9)](_0xe8daeb(0x1f7));_0x1e736f[_0xe8daeb(0x1ca)]='';let _0x8f463c=0x0,_0x1f74c9=0x0;!incomeData||incomeData[_0xe8daeb(0x27c)]===0x0?_0x1e736f['innerHTML']=_0xe8daeb(0x1ec):incomeData[_0xe8daeb(0x293)]((_0x1efa4e,_0x136239)=>{const _0x47eb3d=_0xe8daeb,_0x543a8c=renderRow(_0x1efa4e,_0x136239,_0x47eb3d(0x236));_0x1e736f[_0x47eb3d(0x1ca)]+=_0x543a8c[_0x47eb3d(0x27f)],_0x8f463c+=_0x543a8c['b'],_0x1f74c9+=_0x543a8c['a'];});document[_0xe8daeb(0x1d9)]('footer-exp-budget')['innerText']=formatMoney(_0x165c35),document['getElementById'](_0xe8daeb(0x25c))[_0xe8daeb(0x1f1)]=formatMoney(_0x34b650),document[_0xe8daeb(0x1d9)](_0xe8daeb(0x277))['innerText']=formatMoney(_0x8f463c),document['getElementById'](_0xe8daeb(0x24d))['innerText']=formatMoney(_0x1f74c9);const _0x5c9b62=_0x8f463c-_0x165c35,_0x5ee7eb=_0x1f74c9-_0x34b650;document['getElementById'](_0xe8daeb(0x28d))['innerText']=formatMoney(_0x5c9b62),document[_0xe8daeb(0x1d9)](_0xe8daeb(0x21b))[_0xe8daeb(0x1f1)]=formatMoney(_0x5ee7eb),document[_0xe8daeb(0x1d9)](_0xe8daeb(0x233))[_0xe8daeb(0x1f1)]=formatMoney(_0x5ee7eb),document['getElementById']('footer-net-diff')['className']=_0xe8daeb(0x1c8)+(_0x5ee7eb>=0x0?'text-emerald-400':_0xe8daeb(0x286));}function toggleModal(_0x19252f,_0x5cb8cb){const _0x5bc558=_0x4b960b,_0x565624=document[_0x5bc558(0x1d9)](_0x19252f),_0x2fb3f4=_0x565624['querySelector'](_0x5bc558(0x28a));_0x5cb8cb?(_0x565624[_0x5bc558(0x1d4)]['remove'](_0x5bc558(0x276),_0x5bc558(0x1de)),_0x2fb3f4['classList'][_0x5bc558(0x26f)](_0x5bc558(0x28f)),_0x2fb3f4[_0x5bc558(0x1d4)]['add']('scale-100'),document['body'][_0x5bc558(0x1d4)]['add'](_0x5bc558(0x290))):(_0x565624[_0x5bc558(0x1d4)][_0x5bc558(0x252)](_0x5bc558(0x276),_0x5bc558(0x1de)),_0x2fb3f4[_0x5bc558(0x1d4)]['remove'](_0x5bc558(0x274)),_0x2fb3f4[_0x5bc558(0x1d4)][_0x5bc558(0x252)]('scale-95'),document[_0x5bc558(0x288)][_0x5bc558(0x1d4)][_0x5bc558(0x26f)]('modal-active'));}function closeModal(_0x50a3c9){toggleModal(_0x50a3c9,![]);}function openTransactionModal(_0x1834b2,_0x217d66,_0x2a5eed,_0x38d4bd){const _0x1d6536=_0x4b960b,_0x99e1b2=_0x1834b2===_0x1d6536(0x236);document['getElementById'](_0x1d6536(0x1e5))[_0x1d6536(0x1fe)]=_0x1834b2;const _0x599567=_0x99e1b2?_0x1d6536(0x23f):'bg-rose-600',_0x2cc9a7=_0x99e1b2?_0x1d6536(0x210):_0x1d6536(0x1ce);document[_0x1d6536(0x1d9)](_0x1d6536(0x272))[_0x1d6536(0x23d)]=_0x1d6536(0x1db)+_0x599567,document[_0x1d6536(0x1d9)](_0x1d6536(0x1e8))['innerHTML']=_0x99e1b2?'<i\x20class=\x22fas\x20fa-plus-circle\x20mr-2\x22></i>Nuova\x20Entrata':_0x1d6536(0x1ed),document[_0x1d6536(0x1d9)](_0x1d6536(0x218))[_0x1d6536(0x23d)]=_0x1d6536(0x255)+_0x2cc9a7,document[_0x1d6536(0x1d9)]('transId')[_0x1d6536(0x1fe)]='';const _0x48c9f2=new Date(),_0x33adf4=_0x48c9f2[_0x1d6536(0x1d6)]()[_0x1d6536(0x1ef)]('T')[0x0];document[_0x1d6536(0x1d9)](_0x1d6536(0x294))['value']=_0x33adf4,populateTransForm(_0x1834b2);if(_0x217d66)document[_0x1d6536(0x1d9)](_0x1d6536(0x20b))[_0x1d6536(0x1fe)]=_0x217d66;updateItemSelect();if(_0x2a5eed)document[_0x1d6536(0x1d9)](_0x1d6536(0x27a))['value']=_0x2a5eed;document[_0x1d6536(0x1d9)](_0x1d6536(0x240))[_0x1d6536(0x1fe)]='',document[_0x1d6536(0x1d9)](_0x1d6536(0x1f3))[_0x1d6536(0x1fe)]='',toggleModal(_0x1d6536(0x22d),!![]);}function populateTransForm(_0x3d2379){const _0x5e2c46=_0x4b960b,_0x423337=_0x3d2379===_0x5e2c46(0x236)?incomeData:expenseData,_0x1b0d3a=[...new Set(_0x423337['map'](_0x1c87a8=>_0x1c87a8[_0x5e2c46(0x1e9)]))];document[_0x5e2c46(0x1d9)](_0x5e2c46(0x20b))['innerHTML']=_0x1b0d3a[_0x5e2c46(0x234)](_0x50558e=>_0x5e2c46(0x275)+_0x50558e+'\x22>'+_0x50558e+'</option>')[_0x5e2c46(0x232)](''),updateItemSelect();}function updateItemSelect(){const _0x1a19f1=_0x4b960b,_0x177522=document[_0x1a19f1(0x1d9)](_0x1a19f1(0x1e5))[_0x1a19f1(0x1fe)],_0x4c21e0=document[_0x1a19f1(0x1d9)](_0x1a19f1(0x20b))[_0x1a19f1(0x1fe)],_0x167143=_0x177522===_0x1a19f1(0x236)?incomeData:expenseData,_0x100c30=_0x167143[_0x1a19f1(0x25f)](_0x1c7938=>_0x1c7938[_0x1a19f1(0x1e9)]===_0x4c21e0);document[_0x1a19f1(0x1d9)](_0x1a19f1(0x27a))[_0x1a19f1(0x1ca)]=_0x100c30[_0x1a19f1(0x234)](_0x16fed2=>_0x1a19f1(0x275)+_0x16fed2['name']+'\x22>'+_0x16fed2[_0x1a19f1(0x223)]+_0x1a19f1(0x206))[_0x1a19f1(0x232)]('');}function saveTransaction(){const _0x3ee42a=_0x4b960b,_0x34e9cf=document[_0x3ee42a(0x1d9)](_0x3ee42a(0x1d8))[_0x3ee42a(0x1fe)],_0x24737d=document[_0x3ee42a(0x1d9)](_0x3ee42a(0x1e5))['value'],_0x152ff8=document[_0x3ee42a(0x1d9)](_0x3ee42a(0x20b))[_0x3ee42a(0x1fe)],_0xe54b58=document[_0x3ee42a(0x1d9)]('transItem')[_0x3ee42a(0x1fe)],_0x411720=document[_0x3ee42a(0x1d9)]('transDate')['value'],_0xaabf15=parseFloat(document[_0x3ee42a(0x1d9)](_0x3ee42a(0x240))[_0x3ee42a(0x1fe)]),_0x37543e=document[_0x3ee42a(0x1d9)](_0x3ee42a(0x1f3))[_0x3ee42a(0x1fe)];if(!_0xaabf15||isNaN(_0xaabf15)){showCustomAlert(_0x3ee42a(0x248));return;}if(!_0x411720){showCustomAlert('Data\x20mancante');return;}const _0x40535f={'id':_0x34e9cf?parseInt(_0x34e9cf):Date[_0x3ee42a(0x1c6)](),'type':_0x24737d,'group':_0x152ff8,'name':_0xe54b58,'date':_0x411720,'amount':_0xaabf15,'note':_0x37543e};if(_0x34e9cf){const _0x35a419=transactions[_0x3ee42a(0x200)](_0x186f9a=>_0x186f9a['id']==_0x34e9cf);if(_0x35a419!==-0x1)transactions[_0x35a419]=_0x40535f;}else transactions['push'](_0x40535f);saveData(),toggleModal(_0x3ee42a(0x22d),![]);if(currentDetailCtx)renderDetailList();if(!document[_0x3ee42a(0x1d9)]('reportModal')['classList'][_0x3ee42a(0x208)](_0x3ee42a(0x1de)))openReportModal();}let currentDetailCtx=null;function openDetailModal(_0x4a3662,_0x333cea,_0x21fa3a,_0x391319){const _0x134fb1=_0x4b960b;currentDetailCtx={'type':_0x4a3662,'group':_0x333cea,'name':_0x21fa3a,'monthIndex':_0x391319};const _0x1a0e7c=_0x4a3662===_0x134fb1(0x236);document[_0x134fb1(0x1d9)](_0x134fb1(0x21e))[_0x134fb1(0x23d)]=_0x134fb1(0x25d)+(_0x1a0e7c?_0x134fb1(0x23f):_0x134fb1(0x1cf)),document[_0x134fb1(0x1d9)](_0x134fb1(0x1c9))[_0x134fb1(0x1f1)]=_0x21fa3a,document[_0x134fb1(0x1d9)](_0x134fb1(0x230))[_0x134fb1(0x1f1)]=_0x391319===0xc?_0x134fb1(0x23e):months[_0x391319]+'\x20-\x20'+_0x333cea,document[_0x134fb1(0x1d9)](_0x134fb1(0x215))[_0x134fb1(0x23d)]='w-full\x20font-bold\x20py-3\x20rounded-lg\x20shadow\x20text-white\x20transition-all\x20flex\x20items-center\x20justify-center\x20gap-2\x20'+(_0x1a0e7c?_0x134fb1(0x210):'bg-rose-600\x20hover:bg-rose-700'),document[_0x134fb1(0x1d9)](_0x134fb1(0x215))[_0x134fb1(0x287)]=()=>openTransactionModal(_0x4a3662,_0x333cea,_0x21fa3a,_0x391319===0xc?undefined:_0x391319),renderDetailList(),toggleModal(_0x134fb1(0x1fb),!![]);}function renderDetailList(){const _0x45f59f=_0x4b960b;if(!currentDetailCtx)return;const {type:_0x1fd091,group:_0x142c45,name:_0x850e62,monthIndex:_0xccc472}=currentDetailCtx,_0x2dddf8=document[_0x45f59f(0x1d9)](_0x45f59f(0x243));_0x2dddf8['innerHTML']='';const _0x14247f=_0x1fd091===_0x45f59f(0x236)?incomeData:expenseData,_0x5f52f1=_0x14247f[_0x45f59f(0x1dd)](_0x2d54c7=>_0x2d54c7[_0x45f59f(0x1e9)]===_0x142c45&&_0x2d54c7[_0x45f59f(0x223)]===_0x850e62);if(!_0x5f52f1)return;let _0x5f5c66=_0xccc472===0xc?sumArr(_0x5f52f1[_0x45f59f(0x1d1)]):_0x5f52f1[_0x45f59f(0x1d1)][_0xccc472]||0x0;if(_0x5f5c66!==0x0)_0x2dddf8[_0x45f59f(0x1ca)]+='<tr\x20class=\x22bg-slate-50\x22><td\x20class=\x22px-6\x20py-3\x20italic\x20text-slate-500\x22>Base\x20Iniziale</td><td\x20class=\x22px-6\x20py-3\x20text-right\x22>'+formatMoney(_0x5f5c66)+'</td><td></td></tr>';let _0x3a493e=transactions[_0x45f59f(0x25f)](_0x32fb57=>{const _0x10214f=_0x45f59f,_0x4b0387=new Date(_0x32fb57[_0x10214f(0x270)]),_0x593a39=_0x4b0387[_0x10214f(0x1ff)](),_0x1a1ac9=_0xccc472===0xc||_0x593a39===_0xccc472;return _0x32fb57[_0x10214f(0x214)]===_0x1fd091&&_0x32fb57[_0x10214f(0x1e9)]===_0x142c45&&_0x32fb57[_0x10214f(0x223)]===_0x850e62&&_0x1a1ac9;});_0x3a493e[_0x45f59f(0x1e1)]((_0x15dde5,_0x446825)=>new Date(_0x446825[_0x45f59f(0x270)])-new Date(_0x15dde5['date'])),_0x3a493e[_0x45f59f(0x293)](_0x25163c=>{const _0x9aa3b6=_0x45f59f,_0x5c35fb=new Date(_0x25163c['date']),_0x27999d=String(_0x5c35fb['getDate']())[_0x9aa3b6(0x1dc)](0x2,'0')+'/'+String(_0x5c35fb[_0x9aa3b6(0x1ff)]()+0x1)[_0x9aa3b6(0x1dc)](0x2,'0');_0x2dddf8['innerHTML']+=_0x9aa3b6(0x1e4)+_0x27999d+_0x9aa3b6(0x207)+(_0x25163c[_0x9aa3b6(0x23a)]||'Manuale')+'</td><td\x20class=\x22px-6\x20py-3\x20text-right\x20font-bold\x20'+(_0x1fd091==='income'?_0x9aa3b6(0x24a):_0x9aa3b6(0x245))+'\x22>'+formatMoney(_0x25163c[_0x9aa3b6(0x20a)])+_0x9aa3b6(0x281)+_0x25163c['id']+_0x9aa3b6(0x202)+_0x25163c['id']+')\x22\x20class=\x22text-rose-500\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button></td></tr>';});}function _0x2180(_0x448599,_0x2a17d5){_0x448599=_0x448599-0x1c3;const _0x12e0ef=_0x12e0();let _0x218026=_0x12e0ef[_0x448599];return _0x218026;}function editTrans(_0x2a16fd){const _0x37b6f8=_0x4b960b,_0x37fc0f=transactions[_0x37b6f8(0x1dd)](_0x5b675a=>_0x5b675a['id']===_0x2a16fd);if(!_0x37fc0f)return;openTransactionModal(_0x37fc0f[_0x37b6f8(0x214)]),document['getElementById'](_0x37b6f8(0x1d8))[_0x37b6f8(0x1fe)]=_0x2a16fd,document[_0x37b6f8(0x1d9)](_0x37b6f8(0x20b))[_0x37b6f8(0x1fe)]=_0x37fc0f[_0x37b6f8(0x1e9)],updateItemSelect(),document[_0x37b6f8(0x1d9)](_0x37b6f8(0x27a))[_0x37b6f8(0x1fe)]=_0x37fc0f['name'],document[_0x37b6f8(0x1d9)](_0x37b6f8(0x294))[_0x37b6f8(0x1fe)]=_0x37fc0f['date'],document[_0x37b6f8(0x1d9)](_0x37b6f8(0x240))[_0x37b6f8(0x1fe)]=_0x37fc0f[_0x37b6f8(0x20a)],document['getElementById'](_0x37b6f8(0x1f3))[_0x37b6f8(0x1fe)]=_0x37fc0f['note']||'';}function deleteTrans(_0x4e63dc){showCustomConfirm(()=>{const _0x55992c=_0x2180;transactions=transactions[_0x55992c(0x25f)](_0x59e677=>_0x59e677['id']!==_0x4e63dc),saveData(),renderDetailList(),updateUI();});}window['addEventListener'](_0x4b960b(0x209),initApp);
    </script>
<script>
  // BLOCCO TASTO DESTRO
  document.addEventListener('contextmenu', event => event.preventDefault());

  // BLOCCO TASTI SCORCIATOIA (F12, CTRL+U, CTRL+SHIFT+I, ecc.)
  document.onkeydown = function(e) {
    // F12
    if(event.keyCode == 123) {
       return false;
    }
    // Ctrl+Shift+I (Ispeziona)
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) {
       return false;
    }
    // Ctrl+Shift+C (Ispeziona elemento)
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {
       return false;
    }
    // Ctrl+Shift+J (Console)
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {
       return false;
    }
    // Ctrl+U (Visualizza sorgente)
    if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {
       return false;
    }
  }
</script>
</body>
</html>
